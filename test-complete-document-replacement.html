<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON2Table - Complete Document Replacement Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            color: white;
            border-radius: 10px;
        }
        .test-info {
            background: #f0fdf4;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #16a34a;
        }
        .verification-list {
            background: #ffffff;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #d1fae5;
            margin: 20px 0;
        }
        .verification-list h4 {
            margin: 0 0 15px 0;
            color: #166534;
        }
        .verification-list ul {
            margin: 0;
            padding-left: 20px;
        }
        .verification-list li {
            margin-bottom: 8px;
            color: #374151;
        }
        .original-content {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #6b7280;
        }
        .original-content h4 {
            margin: 0 0 10px 0;
            color: #374151;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>✅ Complete Document Replacement Test</h1>
        <p>Verify that NO traces of original content remain after conversion</p>
    </div>

    <div class="test-info">
        <h3>🧪 What This Test Verifies:</h3>
        <div class="verification-list">
            <h4>Complete Content Elimination:</h4>
            <ul>
                <li>✅ Original PRE element completely removed</li>
                <li>✅ No raw JSON container created</li>
                <li>✅ No toggle between table/raw view</li>
                <li>✅ Clean HTML document with only table interface</li>
                <li>✅ Zero traces of original content in DOM</li>
            </ul>
        </div>

        <div class="verification-list">
            <h4>Document Structure After Conversion:</h4>
            <ul>
                <li>✅ Fresh HTML document created with document.write()</li>
                <li>✅ Only essential CSS and structure included</li>
                <li>✅ Single table container with virtual scrolling</li>
                <li>✅ No hidden elements containing original JSON</li>
                <li>✅ Single "JSON Table View" button (no toggle options)</li>
            </ul>
        </div>
    </div>

    <div class="original-content">
        <h4>Original Content Before Conversion:</h4>
        <p><strong>Note:</strong> The content below will be completely replaced - no traces will remain in the DOM after conversion.</p>
    </div>

    <div style="background: #fef3c7; padding: 15px; border-radius: 6px; margin-bottom: 20px; border-left: 4px solid #f59e0b;">
        <strong>How to Test:</strong>
        <ol>
            <li>Install the JSON2Table extension</li>
            <li>Click the extension icon and "Detect & Convert JSON"</li>
            <li><strong>Inspect DOM:</strong> Use browser dev tools to verify no PRE elements exist</li>
            <li><strong>Check for raw JSON:</strong> Verify no hidden containers with original content</li>
            <li><strong>Verify interface:</strong> Should see only table view, no toggle buttons</li>
            <li><strong>Test scrolling:</strong> Ensure smooth virtual scrolling with no interference</li>
        </ol>
    </div>

    <!-- Large JSON dataset for testing complete replacement -->
    <pre style="display: none;" id="json-data">
    {
      "products": [
        {
          "id": 1,
          "title": "Professional Laptop",
          "description": "High-performance laptop for professional use with advanced features and long battery life",
          "category": "electronics",
          "price": 1299.99,
          "discountPercentage": 15.5,
          "rating": 4.8,
          "stock": 25,
          "tags": ["laptop", "professional", "high-performance"],
          "brand": "TechPro",
          "sku": "TECH-LAP-001",
          "weight": 2.1,
          "dimensions": {
            "width": 35.6,
            "height": 2.4,
            "depth": 24.1
          },
          "specifications": {
            "processor": "Intel Core i7-12700H",
            "memory": "16GB DDR4",
            "storage": "512GB SSD",
            "graphics": "NVIDIA GeForce RTX 3060",
            "display": "15.6\" 4K OLED",
            "battery": "80Wh Li-ion",
            "connectivity": ["WiFi 6E", "Bluetooth 5.2", "USB-C", "HDMI 2.1"]
          },
          "warranty": "3 year comprehensive warranty",
          "shipping": {
            "method": "Express",
            "cost": 0,
            "estimatedDays": 2,
            "countries": ["US", "CA", "UK", "EU"]
          },
          "reviews": [
            {
              "rating": 5,
              "comment": "Exceptional performance and build quality. Perfect for development work.",
              "reviewer": "Alex Chen",
              "date": "2024-06-15T10:30:00Z",
              "verified": true,
              "helpfulVotes": 45
            },
            {
              "rating": 4,
              "comment": "Great laptop but the fan can get a bit loud under heavy load.",
              "reviewer": "Sarah Johnson",
              "date": "2024-06-10T14:22:00Z",
              "verified": true,
              "helpfulVotes": 32
            }
          ],
          "availability": {
            "status": "In Stock",
            "quantity": 25,
            "reservedUnits": 3,
            "nextRestockDate": "2024-07-20"
          },
          "images": [
            "https://example.com/images/laptop-main.jpg",
            "https://example.com/images/laptop-side.jpg",
            "https://example.com/images/laptop-keyboard.jpg"
          ],
          "relatedProducts": [2, 5, 8, 12],
          "metadata": {
            "createdAt": "2024-01-15T08:00:00Z",
            "updatedAt": "2024-06-20T12:30:00Z",
            "views": 15420,
            "favorites": 892,
            "seoKeywords": ["laptop", "professional", "high-performance", "gaming"]
          }
        },
        {
          "id": 2,
          "title": "Wireless Gaming Mouse",
          "description": "Precision wireless gaming mouse with customizable RGB lighting and programmable buttons",
          "category": "accessories",
          "price": 89.99,
          "discountPercentage": 20.0,
          "rating": 4.6,
          "stock": 150,
          "tags": ["mouse", "gaming", "wireless", "rgb"],
          "brand": "GameGear",
          "sku": "GAME-MOUSE-002",
          "weight": 0.12,
          "dimensions": {
            "width": 7.8,
            "height": 4.2,
            "depth": 12.5
          },
          "specifications": {
            "sensor": "PixArt 3370",
            "dpi": "up to 20,000",
            "buttons": 8,
            "battery": "up to 80 hours",
            "connectivity": "2.4GHz wireless + Bluetooth",
            "rgb": "16.8 million colors",
            "programmableButtons": 6
          },
          "warranty": "2 year limited warranty",
          "shipping": {
            "method": "Standard",
            "cost": 5.99,
            "estimatedDays": 5,
            "countries": ["US", "CA", "MX"]
          },
          "reviews": [
            {
              "rating": 5,
              "comment": "Amazing precision and the RGB effects are stunning!",
              "reviewer": "Mike Rodriguez",
              "date": "2024-06-18T16:45:00Z",
              "verified": true,
              "helpfulVotes": 28
            },
            {
              "rating": 4,
              "comment": "Good mouse but software could be more intuitive.",
              "reviewer": "Emily Davis",
              "date": "2024-06-12T09:15:00Z",
              "verified": true,
              "helpfulVotes": 19
            }
          ],
          "availability": {
            "status": "In Stock",
            "quantity": 150,
            "reservedUnits": 8,
            "nextRestockDate": null
          },
          "images": [
            "https://example.com/images/mouse-main.jpg",
            "https://example.com/images/mouse-rgb.jpg"
          ],
          "relatedProducts": [1, 3, 6, 9],
          "metadata": {
            "createdAt": "2024-02-01T10:00:00Z",
            "updatedAt": "2024-06-18T15:20:00Z",
            "views": 8750,
            "favorites": 456,
            "seoKeywords": ["gaming mouse", "wireless", "rgb", "precision"]
          }
        },
        {
          "id": 3,
          "title": "4K Webcam",
          "description": "Ultra HD 4K webcam with auto-focus and noise reduction for professional streaming",
          "category": "electronics",
          "price": 199.99,
          "discountPercentage": 10.0,
          "rating": 4.7,
          "stock": 75,
          "tags": ["webcam", "4k", "streaming", "professional"],
          "brand": "StreamPro",
          "sku": "STREAM-CAM-003",
          "weight": 0.3,
          "dimensions": {
            "width": 9.5,
            "height": 5.8,
            "depth": 6.2
          },
          "specifications": {
            "resolution": "4K @ 30fps, 1080p @ 60fps",
            "sensor": "1/2.8 CMOS",
            "lens": "f/2.0 with auto-focus",
            "fieldOfView": "90° diagonal",
            "microphones": "Dual stereo with noise reduction",
            "connectivity": "USB 3.0",
            "compatibility": ["Windows", "macOS", "Linux"]
          },
          "warranty": "2 year manufacturer warranty",
          "shipping": {
            "method": "Standard",
            "cost": 7.99,
            "estimatedDays": 4,
            "countries": ["US", "CA", "UK", "AU"]
          },
          "reviews": [
            {
              "rating": 5,
              "comment": "Crystal clear video quality, perfect for my YouTube channel!",
              "reviewer": "Jennifer Kim",
              "date": "2024-06-14T11:20:00Z",
              "verified": true,
              "helpfulVotes": 67
            },
            {
              "rating": 4,
              "comment": "Great quality but takes up quite a bit of USB bandwidth.",
              "reviewer": "David Wilson",
              "date": "2024-06-08T13:55:00Z",
              "verified": true,
              "helpfulVotes": 24
            }
          ],
          "availability": {
            "status": "In Stock",
            "quantity": 75,
            "reservedUnits": 12,
            "nextRestockDate": "2024-08-01"
          },
          "images": [
            "https://example.com/images/webcam-main.jpg",
            "https://example.com/images/webcam-setup.jpg"
          ],
          "relatedProducts": [1, 4, 7, 10],
          "metadata": {
            "createdAt": "2024-03-01T12:00:00Z",
            "updatedAt": "2024-06-15T10:45:00Z",
            "views": 12300,
            "favorites": 678,
            "seoKeywords": ["4k webcam", "streaming", "professional", "auto-focus"]
          }
        }
      ],
      "pagination": {
        "currentPage": 1,
        "totalPages": 1,
        "totalItems": 3,
        "itemsPerPage": 30,
        "hasNext": false,
        "hasPrevious": false
      },
      "filters": {
        "categories": ["electronics", "accessories"],
        "priceRange": {"min": 0, "max": 2000},
        "inStockOnly": true,
        "brands": ["TechPro", "GameGear", "StreamPro"]
      },
      "metadata": {
        "generatedAt": "2024-07-06T15:30:00Z",
        "apiVersion": "2.1",
        "requestId": "req_789xyz456",
        "processingTime": "45ms"
      }
    }
    </pre>

    <div style="margin-top: 40px; padding: 20px; background: #f0fdf4; border-radius: 8px; border-left: 4px solid #16a34a;">
        <h3>✅ Expected Results After Complete Document Replacement:</h3>
        <ul>
            <li><strong>DOM Inspection:</strong> No PRE elements should exist anywhere in the document</li>
            <li><strong>No Hidden Containers:</strong> No elements with original JSON content</li>
            <li><strong>Clean Interface:</strong> Only "JSON Table View" button visible (no toggle options)</li>
            <li><strong>Fresh Document:</strong> Browser dev tools should show completely new HTML structure</li>
            <li><strong>Zero Interference:</strong> No scrollbar conflicts or layout issues</li>
            <li><strong>Pure Table Mode:</strong> Extension operates in table-only mode with no raw JSON fallback</li>
        </ul>
    </div>

    <div style="margin-top: 20px; padding: 15px; background: #dbeafe; border-radius: 6px; border-left: 4px solid #2563eb;">
        <strong>🔍 Technical Verification:</strong>
        <br>After conversion, open browser dev tools and verify:
        <ul style="margin-top: 10px;">
            <li><code>document.querySelectorAll('pre').length === 0</code></li>
            <li><code>document.getElementById('json2tableRaw') === null</code></li>
            <li><code>document.body.children.length</code> should show minimal clean structure</li>
            <li>No elements containing original JSON text content</li>
        </ul>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON2Table - Enhanced Array Expansion Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-radius: 10px;
        }
        .test-instructions {
            background: #ecfdf5;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #10b981;
        }
        .test-step {
            background: #f0f9ff;
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            border-left: 3px solid #0284c7;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸš€ Enhanced Array Expansion Test</h1>
        <p>Test the new table-style array expansion with proper column headers</p>
    </div>

    <div class="test-instructions">
        <h3>ðŸ§ª What to Test:</h3>
        <div class="test-step">
            <strong>1. Expand Individual Arrays:</strong> Click on array badges like <span style="background: #ddd6fe; padding: 4px 10px; border-radius: 12px; color: #7c3aed; font-weight: 600;">[+] [2] items</span> to see each array item as table rows
        </div>
        <div class="test-step">
            <strong>2. Review Data Navigation:</strong> Expand the "reviews" array and scroll through the review data to see rating, comment, date, reviewer name, and email
        </div>
        <div class="test-step">
            <strong>3. Expand All Functionality:</strong> Click "Expand All" button to expand all arrays at once, then scroll through the table
        </div>
        <div class="test-step">
            <strong>4. Collapse Controls:</strong> Use individual "Collapse" buttons or "Collapse All" to manage expanded arrays
        </div>
        <div class="test-step">
            <strong>5. Search Expanded Data:</strong> Search for terms like "satisfied" or "recommend" to find specific reviews
        </div>
    </div>

    <div style="background: #fef3c7; padding: 15px; border-radius: 6px; margin-bottom: 20px; border-left: 4px solid #f59e0b;">
        <strong>Expected Behavior:</strong>
        <ul>
            <li>Arrays should expand into proper sub-tables with column headers</li>
            <li>Reviews should show as individual rows with rating, comment, date, etc.</li>
            <li>Scrolling should be smooth with all expanded data visible</li>
            <li>Search should work across all expanded content</li>
            <li>Performance should remain fast even with many expanded arrays</li>
        </ul>
    </div>

    <!-- Enhanced test data with multiple arrays and complex structure -->
    <script type="application/json">
    {
      "products": [
        {
          "id": 1,
          "title": "Premium Wireless Headphones",
          "description": "High-quality wireless headphones with noise cancellation",
          "category": "electronics",
          "price": 199.99,
          "rating": 4.5,
          "stock": 25,
          "tags": ["electronics", "audio", "wireless"],
          "features": [
            {
              "name": "Noise Cancellation",
              "description": "Active noise cancellation technology",
              "priority": "high"
            },
            {
              "name": "Bluetooth 5.0",
              "description": "Latest Bluetooth connectivity",
              "priority": "medium"
            },
            {
              "name": "30-hour Battery",
              "description": "Long-lasting battery life",
              "priority": "high"
            }
          ],
          "specifications": {
            "weight": "250g",
            "color": "Black",
            "wireless": true,
            "batteryLife": "30 hours"
          },
          "reviews": [
            {
              "rating": 5,
              "comment": "Excellent sound quality and comfort!",
              "date": "2025-01-15T10:30:00.000Z",
              "reviewerName": "Sarah Johnson",
              "reviewerEmail": "sarah.j@email.com",
              "verified": true,
              "helpfulVotes": 24
            },
            {
              "rating": 4,
              "comment": "Great headphones, minor connectivity issues",
              "date": "2025-01-10T14:22:00.000Z",
              "reviewerName": "Mike Chen",
              "reviewerEmail": "m.chen@email.com",
              "verified": true,
              "helpfulVotes": 18
            },
            {
              "rating": 5,
              "comment": "Perfect for travel - noise cancellation works great",
              "date": "2025-01-08T09:15:00.000Z",
              "reviewerName": "Emma Davis",
              "reviewerEmail": "emma.d@email.com",
              "verified": false,
              "helpfulVotes": 31
            }
          ],
          "availableColors": ["Black", "White", "Silver"],
          "retailers": [
            {
              "name": "TechStore",
              "price": 199.99,
              "inStock": true,
              "shippingDays": 2
            },
            {
              "name": "ElectronicsHub",
              "price": 189.99,
              "inStock": true,
              "shippingDays": 3
            }
          ]
        },
        {
          "id": 2,
          "title": "Smart Fitness Watch",
          "description": "Advanced fitness tracking with heart rate monitoring",
          "category": "wearables",
          "price": 299.99,
          "rating": 4.2,
          "stock": 15,
          "tags": ["fitness", "smartwatch", "health"],
          "features": [
            {
              "name": "Heart Rate Monitor",
              "description": "Continuous heart rate tracking",
              "priority": "high"
            },
            {
              "name": "GPS Tracking",
              "description": "Built-in GPS for outdoor activities",
              "priority": "high"
            },
            {
              "name": "Water Resistant",
              "description": "50m water resistance",
              "priority": "medium"
            }
          ],
          "specifications": {
            "displaySize": "1.4 inches",
            "batteryLife": "7 days",
            "waterResistance": "50m",
            "connectivity": ["Bluetooth", "WiFi"]
          },
          "reviews": [
            {
              "rating": 4,
              "comment": "Good fitness tracking, battery life could be better",
              "date": "2025-01-12T16:45:00.000Z",
              "reviewerName": "Alex Thompson",
              "reviewerEmail": "alex.t@email.com",
              "verified": true,
              "helpfulVotes": 15
            },
            {
              "rating": 5,
              "comment": "Love the health features and design!",
              "date": "2025-01-09T11:20:00.000Z",
              "reviewerName": "Lisa Rodriguez",
              "reviewerEmail": "lisa.r@email.com",
              "verified": true,
              "helpfulVotes": 22
            }
          ],
          "availableColors": ["Black", "Silver", "Rose Gold"],
          "retailers": [
            {
              "name": "FitnessGear",
              "price": 299.99,
              "inStock": true,
              "shippingDays": 1
            },
            {
              "name": "WearableTech",
              "price": 279.99,
              "inStock": false,
              "shippingDays": 7
            }
          ]
        },
        {
          "id": 3,
          "title": "4K Action Camera",
          "description": "Compact 4K action camera for adventure filming",
          "category": "cameras",
          "price": 149.99,
          "rating": 4.7,
          "stock": 8,
          "tags": ["camera", "4k", "action", "waterproof"],
          "features": [
            {
              "name": "4K Video Recording",
              "description": "Ultra high definition video recording",
              "priority": "high"
            },
            {
              "name": "Image Stabilization",
              "description": "Built-in electronic image stabilization",
              "priority": "high"
            },
            {
              "name": "Waterproof Case",
              "description": "Included waterproof housing",
              "priority": "medium"
            }
          ],
          "specifications": {
            "resolution": "4K@60fps",
            "storage": "MicroSD up to 256GB",
            "batteryLife": "2 hours",
            "dimensions": "59x41x30mm"
          },
          "reviews": [
            {
              "rating": 5,
              "comment": "Amazing video quality for the price!",
              "date": "2025-01-14T13:30:00.000Z",
              "reviewerName": "David Wilson",
              "reviewerEmail": "david.w@email.com",
              "verified": true,
              "helpfulVotes": 28
            },
            {
              "rating": 4,
              "comment": "Great camera, wish battery lasted longer",
              "date": "2025-01-11T08:15:00.000Z",
              "reviewerName": "Jennifer Lee",
              "reviewerEmail": "jen.lee@email.com",
              "verified": true,
              "helpfulVotes": 19
            },
            {
              "rating": 5,
              "comment": "Perfect for my mountain biking adventures!",
              "date": "2025-01-07T15:45:00.000Z",
              "reviewerName": "Tom Anderson",
              "reviewerEmail": "tom.a@email.com",
              "verified": false,
              "helpfulVotes": 35
            },
            {
              "rating": 4,
              "comment": "Easy to use, excellent build quality",
              "date": "2025-01-05T12:00:00.000Z",
              "reviewerName": "Maria Garcia",
              "reviewerEmail": "maria.g@email.com",
              "verified": true,
              "helpfulVotes": 12
            }
          ],
          "availableColors": ["Black", "White"],
          "retailers": [
            {
              "name": "CameraWorld",
              "price": 149.99,
              "inStock": true,
              "shippingDays": 2
            },
            {
              "name": "PhotoGear",
              "price": 139.99,
              "inStock": true,
              "shippingDays": 4
            }
          ]
        }
      ]
    }
    </script>

    <div style="margin-top: 40px; padding: 20px; background: #f1f5f9; border-radius: 8px;">
        <h3>ðŸ“Š Test Results Expected:</h3>
        <ul>
            <li><strong>Reviews Array:</strong> Should expand to show individual review rows with columns for rating, comment, date, reviewerName, reviewerEmail, verified, helpfulVotes</li>
            <li><strong>Features Array:</strong> Should show feature rows with name, description, priority columns</li>
            <li><strong>Retailers Array:</strong> Should display retailer information with name, price, inStock, shippingDays columns</li>
            <li><strong>Search Functionality:</strong> Should find text within expanded array content</li>
            <li><strong>Smooth Scrolling:</strong> Should handle multiple expanded arrays without performance issues</li>
        </ul>
    </div>
</body>
</html>

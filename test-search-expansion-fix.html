<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Expansion Fix Test - JSON2Table</title>
</head>
<body>
<pre>
[
  {
    "id": 1,
    "name": "Alice Johnson",
    "email": "alice@example.com",
    "profile": {
      "age": 28,
      "city": "New York",
      "preferences": {
        "notifications": true,
        "theme": "dark",
        "language": "en"
      }
    },
    "orders": [
      {
        "orderId": "ORD-001",
        "amount": 99.99,
        "items": ["laptop", "mouse"]
      },
      {
        "orderId": "ORD-002", 
        "amount": 45.50,
        "items": ["keyboard", "headphones"]
      }
    ]
  },
  {
    "id": 2,
    "name": "Bob Smith",
    "email": "bob@example.com",
    "profile": {
      "age": 35,
      "city": "Los Angeles",
      "preferences": {
        "notifications": false,
        "theme": "light",
        "language": "es"
      }
    },
    "orders": [
      {
        "orderId": "ORD-003",
        "amount": 120.00,
        "items": ["monitor", "speakers"]
      }
    ]
  },
  {
    "id": 3,
    "name": "Charlie Brown",
    "email": "charlie@example.com", 
    "profile": {
      "age": 42,
      "city": "Chicago",
      "preferences": {
        "notifications": true,
        "theme": "auto",
        "language": "fr"
      }
    },
    "orders": []
  }
]
</pre>

<script>
// Test instructions for the user
console.log(`
=== SEARCH EXPANSION FIX TEST ===

Instructions to test the fix:
1. Wait for the JSON2Table extension to automatically convert this JSON
2. Click on some object badges (like "profile" or "orders") to expand them
3. Expand some nested objects within those (like "preferences")
4. Now type something in the search box (e.g., "Alice" or "New York")
5. EXPECTED: The expanded objects should remain expanded even after filtering
6. PREVIOUS BUG: Everything would collapse when you searched

The fix uses stable row IDs (__rowId) instead of changing row indices,
so expansion state is preserved when the filtered data changes.
`);
</script>
</body>
</html>
